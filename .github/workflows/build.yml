name: build-ublue-hyprland
on:
  pull_request:
    branches:
      - main
  schedule:
    - cron: '00 10 * * *'  # 10:00am UTC everyday
  push:
    branches:
      - main
      - develop  # This should be aligned with 'main'
    paths-ignore:
      - '**/README.md'
  workflow_dispatch:

permissions:
  contents: read
  packages: write
  id-token: write

jobs:
  build_push:    
    uses: ./.github/workflows/build-push.yml
    with:
      image_name: "${{ github.event.repository.name }}"
      image_desc: "Hyprland Shell Blue Image"
      image_registry: "ghcr.io/${{ github.repository_owner }}"
      
  build_iso:
    uses: ./.github/workflows/build-iso.yml
    needs: build_push
    
  upload_iso_to_s3:
    uses: ./.github/workflows/upload-iso-to-s3.yml
    needs: build_iso